<!DOCTYPE html>
<html lang="ar" dir="rtl" id="main-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ù…Ø·Ø¨Ø® Ø§Ù„Ø£ØµØ§Ù„Ø© | Al-Asala KÃ¼che</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" id="bootstrap-link">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@400;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #e67e22; --dark: #2c3e50; --success: #27ae60; --bg: #fdfbf9; }
        * { touch-action: manipulation; }
        body { background-color: var(--bg); font-family: 'Cairo', sans-serif; -webkit-text-size-adjust: 100%; overflow-x: hidden; transition: all 0.3s ease; }
        input, textarea, select, .form-control { font-size: 16px !important; border-radius: 12px !important; }

        .navbar { background: var(--dark); border-bottom: 4px solid var(--primary); padding: 12px 0; }
        .navbar-brand { font-family: 'Changa', sans-serif; font-weight: 700; font-size: 1.5rem; color: #fff !important; }
        
        /* Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© */
        .lang-switcher {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid var(--primary);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: bold;
        }

        .hero-banner { background: linear-gradient(135deg, var(--primary), #d35400); color: #fff; padding: 15px; text-align: center; font-family: 'Changa', sans-serif; }
        .food-card { border: none; border-radius: 20px; background: #fff; box-shadow: 0 6px 15px rgba(0,0,0,0.05); height: 100%; transition: 0.3s; }
        .card-img-top { height: 140px; object-fit: cover; border-radius: 20px 20px 0 0; }
        .price-tag { color: var(--primary); font-size: 1.2rem; font-weight: 800; }
        .unit-text { font-size: 0.75rem; color: #888; }
        .btn-add { background: var(--primary); color: #fff; border: none; border-radius: 10px; padding: 8px; width: 100%; font-weight: 700; }

        .cart-float { position: fixed; bottom: 20px; left: 20px; width: 60px; height: 60px; background: var(--success); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; z-index: 1000; box-shadow: 0 8px 20px rgba(0,0,0,0.2); border: none; }
        [dir="ltr"] .cart-float { left: auto; right: 20px; } /* ØªØ¹Ø¯ÙŠÙ„ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø³Ù„Ø© Ù„Ù„ØºØ© Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© */

        .modal-content { border-radius: 25px; border: none; }
        .modal-header { background: var(--dark); color: #fff; border-radius: 25px 25px 0 0; }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark shadow-sm">
        <div class="container d-flex justify-content-between align-items-center">
            <span class="navbar-brand" id="nav-title">Ù…Ø·Ø¨Ø® Ø§Ù„Ø£ØµØ§Ù„Ø©</span>
            <button class="lang-switcher" onclick="toggleLanguage()" id="lang-btn">Deutsch</button>
        </div>
    </nav>

    <div class="hero-banner" id="hero-msg">âœ¨ Ø·Ø¹Ù… Ø§Ù„Ø´Ø§Ù… Ø§Ù„Ø£ØµÙŠÙ„.. Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙƒ Ø§Ù„Ø¢Ù† âœ¨</div>

    <div class="container mt-4 mb-5">
        <div class="row g-3" id="menu-container"></div>
    </div>

    <button class="cart-float" onclick="openCart()">
        <i class="fas fa-shopping-basket"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-badge">0</span>
    </button>

    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="cart-title">ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ ğŸ›’</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cart-items-list" class="mb-3 text-center"></div>
                    <div class="p-3 bg-light rounded-3 d-flex justify-content-between align-items-center">
                        <span class="fw-bold" id="total-lbl">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                        <span id="total-price" class="fw-bold text-success fs-4">0.00 â‚¬</span>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-warning w-100 py-3 fw-bold rounded-3" onclick="goToCheckout()" id="next-btn">Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ <i class="fas fa-arrow-left ms-2"></i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="checkoutModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--primary);">
                    <h5 class="modal-title fw-bold" id="info-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ğŸšš</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-12"><input type="text" id="u-name" class="form-control p-3 trans-input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"></div>
                        <div class="col-12"><input type="tel" id="u-phone" class="form-control p-3 trans-input" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨"></div>
                        <div class="col-12">
                            <label class="small text-muted mb-1" id="date-lbl">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</label>
                            <input type="date" id="u-date" class="form-control p-3">
                        </div>
                        <div class="col-12"><textarea id="u-notes" class="form-control p-3 trans-input" rows="2" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©.."></textarea></div>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-success w-100 py-3 fw-bold rounded-3" onclick="finalSend()" id="send-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ <i class="fab fa-telegram-plane ms-2"></i></button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
    const BOT_TOKEN = "8394320495:AAGyRY5siD2sQBbjL_JaoY1h6GH016TGBYM";
        const CHAT_ID = "1117141728";
        document.addEventListener('touchstart', (e) => { if (e.touches.length > 1) e.preventDefault(); }, { passive: false });

        const CONFIG = { token: "8394320495:AAGyRY5siD2sQBbjL_JaoY1h6GH016TGBYM", chatId: "1117141728" };

        let currentLang = 'ar';
        const translations = {
            ar: {
                nav: "Ù…Ø·Ø¨Ø® Ø§Ù„Ø£ØµØ§Ù„Ø©", hero: "âœ¨ Ø·Ø¹Ù… Ø§Ù„Ø´Ø§Ù… Ø§Ù„Ø£ØµÙŠÙ„.. Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙƒ Ø§Ù„Ø¢Ù† âœ¨", cart: "ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ ğŸ›’",
                total: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:", next: "Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨", info: "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ğŸšš", date: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:",
                send: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨", empty: "Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©", piece: "Ù‚Ø·Ø¹Ø©", unit: "(Ø³Ø¹Ø± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©)",
                pName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„", pPhone: "Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨", pNotes: "Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..",
                msgSent: "ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!", msgSentText: "ÙˆØµÙ„ Ø·Ù„Ø¨Ùƒ Ù„Ù„Ù…Ø·Ø¨Ø® Ø¨Ù†Ø¬Ø§Ø­", 
                added: "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©", langBtn: "Deutsch", direction: "rtl",
                menu: ["ÙƒØ¨Ø© Ù…Ù‚Ù„ÙŠØ©", "ÙƒØ¨Ø© Ù…Ø´ÙˆÙŠØ©", "ÙƒØ¨Ø© Ù„Ø¨Ù†ÙŠØ©", "Ø¨Ø±Ùƒ Ø¬Ø¨Ù†Ø©"]
            },
            de: {
                nav: "Al-Asala KÃ¼che", hero: "âœ¨ Echter Scham-Geschmack.. jetzt bei Ihnen âœ¨", cart: "Bestellung bestÃ¤tigen ğŸ›’",
                total: "Gesamt:", next: "Weiter zur Kasse", info: "Lieferdaten ğŸšš", date: "Lieferdatum:",
                send: "Bestellung abschicken", empty: "Warenkorb ist leer", piece: "StÃ¼ck", unit: "(Preis pro StÃ¼ck)",
                pName: "VollstÃ¤ndiger Name", pPhone: "WhatsApp-Nummer", pNotes: "ZusÃ¤tzliche Anmerkungen..",
                msgSent: "Gesendet!", msgSentText: "Ihre Bestellung ist in der KÃ¼che angekommen", 
                added: "HinzugefÃ¼gt", langBtn: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", direction: "ltr",
                menu: ["Kibbeh Frittiert", "Kibbeh Gegrillt", "Kibbeh in Joghurt", "KÃ¤se-Burek"]
            }
        };

        const menu = [
            { id: 1, price: 1.50, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Kibbeh3.jpg/330px-Kibbeh3.jpg" },
            { id: 2, price: 2.00, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Kobbeh.png/330px-Kobbeh.png" },
            { id: 3, price: 1.00, img: "https://upload.wikimedia.org/wikipedia/commons/2/2c/%D9%83%D8%A8%D8%A9_%D9%84%D8%A8%D9%86%D9%8A%D8%A9.jpg" },
            { id: 4, price: 0.50, img: "https://img-global.cpcdn.com/recipes/12bfcf2ff2cff20f/1280x1280sq80/photo.webp" }
        ];

        let cart = [];
        let lastId = null;

        function toggleLanguage() {
            currentLang = (currentLang === 'ar') ? 'de' : 'ar';
            const htmlTag = document.getElementById('main-html');
            const bootLink = document.getElementById('bootstrap-link');
            
            htmlTag.dir = translations[currentLang].direction;
            htmlTag.lang = currentLang;
            
            // ØªØ¨Ø¯ÙŠÙ„ Ù…Ù„Ù Bootstrap Ù„Ø¯Ø¹Ù… Ø§Ù„Ø§ØªØ¬Ø§Ù‡ LTR Ø£Ùˆ RTL
            bootLink.href = (currentLang === 'ar') ? 
                "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" : 
                "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css";
            
            updateStaticTexts();
            renderMenu();
            updateBadge();
        }

        function updateStaticTexts() {
            const t = translations[currentLang];
            document.getElementById('nav-title').innerText = t.nav;
            document.getElementById('lang-btn').innerText = t.langBtn;
            document.getElementById('hero-msg').innerText = t.hero;
            document.getElementById('cart-title').innerText = t.cart;
            document.getElementById('total-lbl').innerText = t.total;
            document.getElementById('next-btn').innerHTML = t.next + (currentLang==='ar'?' <i class="fas fa-arrow-left"></i>':' <i class="fas fa-arrow-right"></i>');
            document.getElementById('info-title').innerText = t.info;
            document.getElementById('date-lbl').innerText = t.date;
            document.getElementById('send-btn').innerHTML = t.send + ' <i class="fab fa-telegram-plane"></i>';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ Placeholders
            document.getElementById('u-name').placeholder = t.pName;
            document.getElementById('u-phone').placeholder = t.pPhone;
            document.getElementById('u-notes').placeholder = t.pNotes;
        }

        function renderMenu() {
            let opts = "";
            const t = translations[currentLang];
            for (let i = 5; i <= 200; i += 5) opts += `<option value="${i}">${i} ${t.piece}</option>`;
            
            document.getElementById('menu-container').innerHTML = menu.map((item, idx) => `
                <div class="col-6 col-md-3">
                    <div class="food-card p-2 text-center">
                        <img src="${item.img}" class="card-img-top">
                        <div class="food-title mt-2 fw-bold">${t.menu[idx]}</div>
                        <div class="my-2">
                            <span class="price-tag">${item.price.toFixed(2)} â‚¬</span>
                            <div class="unit-text">${t.unit}</div>
                        </div>
                        <select id="qty-${item.id}" class="form-select form-select-sm mb-2 text-center">${opts}</select>
                        <button class="btn btn-add" onclick="addToCart(${item.id}, '${t.menu[idx]}')">${currentLang==='ar'?'Ø£Ø¶Ù':'HinzufÃ¼gen'}</button>
                    </div>
                </div>`).join('');
        }

        function addToCart(id, name) {
            const p = menu.find(x => x.id === id);
            const q = parseInt(document.getElementById(`qty-${id}`).value);
            const ex = cart.find(c => c.id === id);
            if (ex) ex.qty += q; else cart.push({ ...p, qty: q, currentName: name });
            updateBadge();
            Swal.fire({ toast: true, position: 'top', icon: 'success', title: translations[currentLang].added, showConfirmButton: false, timer: 800 });
        }

        function updateBadge() { document.getElementById('cart-badge').innerText = cart.reduce((a, b) => a + b.qty, 0); }

        function openCart() {
            const t = translations[currentLang];
            const list = document.getElementById('cart-items-list');
            let total = 0;
            if (cart.length === 0) {
                list.innerHTML = `<p class="py-3">${t.empty}</p>`;
            } else {
                list.innerHTML = cart.map((item, idx) => {
                    total += item.price * item.qty;
                    return `<div class="d-flex justify-content-between align-items-center border-bottom py-2">
                        <div class="${currentLang==='ar'?'text-end':'text-start'}">
                            <b>${item.currentName}</b> (x${item.qty})
                            <br><small class="text-success">${(item.price*item.qty).toFixed(2)}â‚¬</small>
                        </div>
                        <i class="fas fa-trash-alt delete-item" onclick="removeItem(${idx})"></i>
                    </div>`;
                }).join('');
            }
            document.getElementById('total-price').innerText = total.toFixed(2) + " â‚¬";
            new bootstrap.Modal(document.getElementById('cartModal')).show();
        }

        function removeItem(i) { cart.splice(i, 1); updateBadge(); openCart(); }

        function goToCheckout() {
            if (cart.length === 0) return;
            bootstrap.Modal.getInstance(document.getElementById('cartModal')).hide();
            setTimeout(() => { new bootstrap.Modal(document.getElementById('checkoutModal')).show(); }, 400);
        }

        async function finalSend() {
            const name = document.getElementById('u-name').value;
            const phone = document.getElementById('u-phone').value;
            const date = document.getElementById('u-date').value;
            if (!name || !phone || !date) return;

            const t = translations[currentLang];
            let msg = `ğŸ´ *New Order / Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯*\nğŸ‘¤ ${name}\nğŸ“ ${phone}\nğŸ“… ${date}\nğŸ“ ${document.getElementById('u-notes').value || '-'}\n\nğŸ›’ Items:\n`;
            let total = 0;
            cart.forEach(i => { msg += `â€¢ ${i.currentName} (x${i.qty}) = ${(i.price*i.qty).toFixed(2)}â‚¬\n`; total += i.price*i.qty; });
            msg += `\nğŸ’° Total: ${total.toFixed(2)} â‚¬`;

            fetch(`https://api.telegram.org/bot${CONFIG.token}/sendMessage`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: CONFIG.chatId, text: msg, parse_mode: "Markdown" })
            }).then(() => {
                Swal.fire(t.msgSent, t.msgSentText, "success");
                cart = []; updateBadge();
                bootstrap.Modal.getInstance(document.getElementById('checkoutModal')).hide();
            });
        }

        window.onload = () => { renderMenu(); updateStaticTexts(); };
    </script>
</body>
</html>
